# 命令

用一段文字表示Serein需要执行的内容

## 语法结构

```txt
[类型:参数]主体
```

其中只有 主体 才能插入[变量](./variables)

### 示例

```regex
[g:114514]hello world!
```

- `[g:114514]` 命令头
  - `[...]`将命令头包裹起来，避免出现歧义
  - `g` 为此命令的类型——发送群聊消息
  - `:` 隔开命令类型和参数
  - `114514` 参数——此处为要发送的群号
- `hello world!`执行的内容——此处为发送的消息文本
  - 你可以在这里插入[变量](./variables)

## 命令执行来源

在程序内部用于指示这条命令执行的来源，命令的来源不同可能会影响命令的实际效果

- **消息**
  - 收到群聊消息
  - 收到私聊消息
- **服务器输出匹配**
- **服务器输入匹配**
- **定时任务**
- **反应功能**
- **插件执行**

## 命令类型

| 类型                     | 全称         | 简写  |
| ------------------------ | ------------ | :---: |
| 发送群聊消息             | `group`      |  `g`  |
| 发送私聊消息             | `private`    |  `p`  |
| 向机器人发送文本         | `data`       |  `d`  |
| 发送指令到服务器         | `server`     |  `s`  |
| 绑定                     | `bind`       |  `b`  |
| 解绑                     | `unbind`     | `ub`  |
| 在插件的Js引擎中执行代码 | `javascript` | `js`  |

### 发送群聊消息

- 参数：群聊Id/群号（非必须，见下）
- 主体：发送的内容

当群聊Id未指定时，将按以下顺序获取可能的值

- 执行来源为**群消息**时，使用该群的群号
- 执行来源为反应中与群聊有关的内容时，使用相关联的群聊Id
  - 进群/退群/戳一戳
- 其他情况下，使用设置中的第一个监听群

### 发送私聊消息

- 参数：用户Id（非必须，见下）
- 主体：发送的内容

当用户Id未指定时，将按以下顺序获取可能的值

- 执行来源为消息时，使用发送这条消息的用户
- 执行来源为反应中与群聊有关的内容时，使用相关联的用户Id
  - 进群/退群/戳一戳

### 向机器人发送文本

- 参数：无
- 主体：发送的内容

### 发送指令到服务器

- 参数：服务器Id（非必须，见下）
- 主体：发送的内容
  - 若发送内容为`start`且服务器不在运行时，则会启动服务器
  - 其他情况下将会作为原文发送

当服务器Id未指定时，将按以下顺序获取可能的值

- 执行来源为反应中与服务器有关的内容时，使用相关联的服务器Id
  - 服务器启动/正常退出/非正常退出
- 当前只有一个服务器配置时，使用此服务器的Id

### 绑定

- 参数：无
- 主体：绑定的Id

:::note

此命令只能通过群消息触发（执行来源为消息）

:::

### 解绑

- 参数：无
- 主体：无

:::note

此命令只能通过群消息触发（执行来源为消息）

:::

### 在插件的Js引擎中执行代码

- 参数：插件Id
- 主体：执行的代码内容
