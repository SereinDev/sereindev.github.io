# 连接

## 是否连接

<Tabs groupId="lang">

<TabItem value="cs" label="C#" >

```cs
namespace Serein.Core.Services.Network.Connection;

public partial class ConnectionManager
{
    public bool IsActive { get; }
}
```

</TabItem>

<TabItem value="js" label="JavaScript" >

```ts
serein.connection.isActive
```

- 类型
  - `boolean`

</TabItem>

</Tabs>

## 接收数据包数

<Tabs groupId="lang">

<TabItem value="cs" label="C#" >

```cs
namespace Serein.Core.Services.Network.Connection;

public partial class ConnectionManager
{
    public ulong Received { get; }
}
```

</TabItem>

<TabItem value="js" label="JavaScript" >

```ts
serein.connection.received
```

- 类型
  - `number`

</TabItem>

</Tabs>

## 发送数据包数

<Tabs groupId="lang">

<TabItem value="cs" label="C#" >

```cs
namespace Serein.Core.Services.Network.Connection;

public partial class ConnectionManager
{
    public ulong Sent { get; }
}
```

</TabItem>

<TabItem value="js" label="JavaScript" >

```ts
serein.connection.sent
```

- 类型
  - `number`

</TabItem>

</Tabs>

## 启动时间

<Tabs groupId="lang">

<TabItem value="cs" label="C#" >

```cs
using System;

namespace Serein.Core.Services.Network.Connection;

public partial class ConnectionManager
{
    public DateTime? StartedAt { get; }
}
```

</TabItem>

<TabItem value="js" label="JavaScript" >

```ts
serein.connection.startedAt
```

- 类型
  - `Date`

</TabItem>

</Tabs>

## 启动

<Tabs groupId="lang">

<TabItem value="cs" label="C#" >

```cs
namespace Serein.Core.Services.Network.Connection;

public partial class ConnectionManager
{
    public void Start();
}
```

</TabItem>

<TabItem value="js" label="JavaScript" >

```ts
serein.connection.start(): void
```

</TabItem>

</Tabs>

- 若已连接则会报错，可用`try...catch`捕获

## 停止

<Tabs groupId="lang">

<TabItem value="cs" label="C#" >

```cs
namespace Serein.Core.Services.Network.Connection;

public partial class ConnectionManager
{
    public void Stop();
}
```

</TabItem>

<TabItem value="js" label="JavaScript" >

```ts
serein.connection.stop(): void
```

</TabItem>

</Tabs>

- 若未连接则会报错，可用`try...catch`捕获

## 发送文本

<Tabs groupId="lang">

<TabItem value="cs" label="C#" >

```cs
using System.Threading.Tasks;

namespace Serein.Core.Services.Network.Connection;

public partial class ConnectionManager
{
    public Task SendDataAsync(string data);
}
```

</TabItem>

<TabItem value="js" label="JavaScript" >

```ts
serein.connection.sendDataAsync(data: string): Promise<void>
```

</TabItem>

</Tabs>

| 参数   | 类型     | 说明       |
| ------ | -------- | ---------- |
| `data` | `string` | 发送的内容 |

## 发送消息

<Tabs groupId="lang">

<TabItem value="cs" label="C#" >

```cs
using System.Threading.Tasks;

namespace Serein.Core.Services.Network.Connection;

public partial class ConnectionManager
{
    public async Task SendMessageAsync(
        TargetType type,
        string target,
        string text,
        CommandArguments? commandArguments = null
    );
}
```

</TabItem>

<TabItem value="js" label="JavaScript" >

```ts
serein.connection.sendMessage(
    type: TargetType,
    target: string,
    text: string,
    commandArguments?: CommandArguments
): Promise<void>
```

</TabItem>

</Tabs>

| 参数               | 类型                                                                                                                     | 说明                    |
| ------------------ | ------------------------------------------------------------------------------------------------------------------------ | ----------------------- |
| `type`             | [`TargetType`](https://github.com/SereinDev/Serein/blob/main/src/Serein.Core/Models/Network/Connection/TargetType.cs)    | 目标类型                |
| `target`           | `string`                                                                                                                 | 目标 Id（频道、用户等） |
| `text`             | `string`                                                                                                                 | 消息内容                |
| `commandArguments` | [`CommandArguments?`](https://github.com/SereinDev/Serein/blob/main/src/Serein.Core/Models/Commands/CommandArguments.cs) | 命令参数（可选）        |
